[tox]
# Running plain tox will run the default environment (testenv) with the default
# python3 interpreter of the user.
envlist=py3
[testenv]
deps=coverage
     pytest
commands =
    # Create HTML coverage report for humans and xml coverage report for external services.
    coverage run --source=singularity_permanent_cache -m pytest -v tests
    coverage html
    coverage xml

[testenv:lint]
deps=flake8
     flake8-import-order
     bandit
     mypy
commands =
    flake8 src tests setup.py
    # Skip 'assert used' issue as this is a pytest plugin.'
    # Use csv format because it has cleanest output.
    bandit -s B101 -f csv -r src/ tests/
    mypy src/singularity_permanent_cache tests/
